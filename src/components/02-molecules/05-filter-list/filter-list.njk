<div class="filter-sort__filters">
	<div class="accordions">
		<div class="accordion">
			<p class="accordion__heading">{{ label }}</p>
			<div class="accordion__content">
				<ul class="input-group {{ label | slugify }}">
					{% for term in terms %}
					<li>
						<input type="checkbox" name="{{ label | slugify }}[]" id="{{ label | slugify }}-{{ term.label | slugify }}" value="{{ term.label | slugify }}"><label for="{{ label | slugify }}-{{ term.label | slugify }}">{{ term.label }}</label>
						{% render '@filter-button', {standAlone: true} %}
						<ul class="input-group">
							{% if term.childrenCount %}
								{% for i in range(1, term.childrenCount) %}
								<li><input type="checkbox" name="{{ label | slugify }}[]" id="{{ label | slugify }}-{{ term.label | slugify }}-{{ i }}" value="{{ term.label | slugify }}-{{ i }}"><label for="{{ label | slugify }}-{{ term.label | slugify }}-{{ i }}">{{ term.label }} {{ i }}</label></li>
								{% endfor %}
							{% elseif term.children %}
								{% for child in term.children %}
								<li><input type="checkbox" name="{{ label | slugify }}[]" id="{{ label | slugify }}-{{ child | slugify }}" value="{{ child | slugify }}"><label for="{{ label | slugify }}-{{ child | slugify }}">{{ child }}</label></li>
								{% endfor %}
							{% endif %}
						</ul>
					</li>
					{% endfor %}
				</ul>
			</div>
		</div>
	</div>
</div>

<script type="text/javascript">
	let controls = document.querySelectorAll('.input-group [aria-expanded]');
	Array.prototype.forEach.call( controls, control => {
		control.addEventListener('click', (event) => {
			const expanded = 'true' === event.currentTarget.getAttribute( 'aria-expanded' ) || false;
			event.currentTarget.setAttribute('aria-expanded', !expanded);
		});
	});
</script>
